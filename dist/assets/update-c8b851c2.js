import{q as O,p as M,r as o,u as q,H,O as K,o as Q,b as f,d as r,e as d,C as B,w as h,h as t,L as J,i as c,f as p,t as b,n as _,K as W,k as X,j as F,F as Y,m as Z}from"./index-a963b12f.js";import{r as ee,v as ae,p as te,a as le}from"./filepond-plugin-image-preview.esm-637b68ac.js";import{S as oe,a as se,P as ne,N as ie,A as ue}from"./autoplay-5106414e.js";import"./pagination-25b2bd0b.js";import{p as de}from"./filepond-plugin-file-encode.esm-b0bc8408.js";const ce={class:"flex justify-center"},re=["onSubmit"],me={class:"pb-4 text-center va-text-bold"},pe=Z(" Update Flight "),ve={class:""},ge=t("label",{for:"password"},"name ",-1),fe={key:0,class:"mt-1 mb-5 text-red-500"},_e={class:""},he=t("label",{for:"password"},"link ",-1),be={key:0,class:"mt-1 mb-5 text-red-500"},we={class:""},xe=t("label",{for:"password"},"discount ",-1),ke={key:0,class:"mt-1 mb-5 text-red-500"},ye=["src"],Ve={class:"text-center bg-teal-100 rounded-3xl m-2"},Se={class:"bg-white rounded-3xl w-full m-auto"},Ce=["src"],Ue=["onClick","value"],Be=t("svg",{width:"20px",height:"20px",viewBox:"0 0 24 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),t("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),t("g",{id:"SVGRepo_iconCarrier"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.207 6.207a1 1 0 0 0-1.414-1.414L12 10.586 6.207 4.793a1 1 0 0 0-1.414 1.414L10.586 12l-5.793 5.793a1 1 0 1 0 1.414 1.414L12 13.414l5.793 5.793a1 1 0 0 0 1.414-1.414L13.414 12l5.793-5.793z",fill:"#ffffff"})])],-1),Fe=[Be],Le={key:0,class:"mt-1 mb-5 text-red-500"},ze={setup(Ne){const L=[ne,ie,ue];O(),ee(de),ae(le,te);const N=M(),w=o(null),l=o({name:"",link:"",discount:0});o(null);const x=o([]),k=q(),R=o(0),v=o(""),y=o(""),u=o({});o(0),o(0);const T=o([]),I=o([{name:"English",value:"gb"},{name:"Arabic",value:"sa"},{name:"Azerbaijan",value:"az"},{name:"Georgia",value:"ge"},{name:"Russia",value:"ru"},{name:"Turkey",value:"tr"}]),m=o("gb"),n=o(""),P=a=>{console.log(a.files[0]),T.value=a.files,v.value=a.files[0],y.value=URL.createObjectURL(v.value),console.log(v.value)},$=()=>{const a=new FormData;a.append("images",v.value),a.append("name",l.value.name),a.append("link",l.value.link),a.append("discount",l.value.discount),f.defaults.headers.common.local=m.value,f.post(`/api/flights/${u.value.id}/update`,a).then(e=>{n.value=[],R.value=1,u.value=e.data.flight,N.add({severity:"success",summary:"Successful",detail:"Flight Updated",life:3e3})}).catch(e=>{n.value=e.response.data.errors,console.log(n.value)})};H(m,async(a,e)=>{var i,g;console.log(u.value),l.value.name=((i=u.value)==null?void 0:i.name[a])==null?"":(g=u.value)==null?void 0:g.name[a]}),K(()=>x.value);const j=a=>{f.post(`/api/accommodition/delete_image/${a}`).then(e=>{countries.value=e.data.countries,console.log(countries.value)}),setTimeout(()=>{f.get(`/api/flights/${k.params.id}`).then(e=>{var i;w.value=(i=e.data.flight)==null?void 0:i.media,l.value.name=e.data.flight.name[m.value],l.value.link=e.data.flight.link,l.value.descount=e.data.flight.discount,u.value=e.data.flight,console.log(u.value),console.log(x.value)})},200)};return Q(()=>{f.get(`/api/flights/${k.params.id}`).then(e=>{var i;w.value=(i=e.data.flight)==null?void 0:i.media,l.value.name=e.data.flight.name[m.value],l.value.link=e.data.flight.link,l.value.descount=e.data.flight.discount,u.value=e.data.flight,console.log(u.value),console.log(x.value)});const a=document.getElementsByClassName("hidImg");console.log(a[0])}),(a,e)=>{const i=r("Dropdown"),g=r("InputText"),z=r("InputNumber"),A=r("FileUpload"),D=r("Button"),E=r("Toast"),G=r("va-card");return d(),B(G,{class:"card"},{default:h(()=>{var V,S,C,U;return[t("div",ce,[t("form",{onSubmit:J($,["prevent"]),class:"flex flex-col w-3/4 py-9"},[t("h2",me,[pe,c(i,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),editable:"",options:I.value,optionLabel:"name","option-value":"value",class:"w-36 mx-3 mx-10"},null,8,["modelValue","options"])]),t("div",ve,[ge,c(g,{modelValue:l.value.name,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.name=s),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(V=n.value)!=null&&V.name?(d(),p("div",fe,b(n.value.name[0]),1)):_("",!0)]),t("div",_e,[he,c(g,{modelValue:l.value.link,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.link=s),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(S=n.value)!=null&&S.link?(d(),p("div",be,b(n.value.link[0]),1)):_("",!0)]),t("div",we,[xe,c(z,{modelValue:l.value.discount,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.discount=s),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(C=n.value)!=null&&C.discount?(d(),p("div",ke,b(n.value.discount[0]),1)):_("",!0)]),t("div",null,[c(A,{id:"password",onUploader:P,accept:"image/*",required:"true",multiple:"true","custom-upload":!0,autofocus:"",class:W({"p-invalid":a.submitted})},{empty:h(()=>[v.value!=""?(d(),p("img",{key:0,src:y.value,class:"w-[200px] h-[90px]"},null,8,ye)):_("",!0)]),_:1},8,["class"]),c(F(se),{onSlideChange:a.onSlideChange,navigation:!0,options:a.swiperOptions,modules:L,scrollbar:{draggable:!0},autoplay:{delay:2e3,disableOnInteraction:!1},breakpoints:{320:{slidesPerView:2,spaceBetween:10},480:{slidesPerView:3,spaceBetween:20},768:{slidesPerView:4,spaceBetween:10}}},{default:h(()=>[(d(!0),p(Y,null,X(w.value,s=>(d(),B(F(oe),null,{default:h(()=>[t("div",Ve,[t("div",Se,[t("img",{class:"relative rounded-md",style:{height:"150px !important"},src:s==null?void 0:s.original_url},null,8,Ce),t("button",{class:"absolute top-[7%] left-[5%] bg-[#861d1d] p-2 px-4 rounded-full",onClick:Re=>j(s.id),value:s.id},Fe,8,Ue)])])]),_:2},1024))),256))]),_:1},8,["onSlideChange","options"]),(U=n.value)!=null&&U.images?(d(),p("div",Le,b(n.value.images[0]),1)):_("",!0)]),c(D,{type:"submit",label:"Submit",class:"mt-3"})],40,re)]),c(E)]}),_:1})}}};export{ze as default};
