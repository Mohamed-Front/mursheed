import{q,r as o,p as K,u as H,o as J,b as v,d as u,e as i,C as T,w as _,h as l,L as Q,i as d,f,t as w,n as h,k as C,F as U,K as W,j as B,m as X}from"./index-a963b12f.js";import{S as Y,a as Z,P as ee,N as te,A as ae}from"./autoplay-5106414e.js";import"./pagination-25b2bd0b.js";const le={class:"flex justify-center"},se=["onSubmit"],oe={class:"pb-4 text-center va-text-bold"},ne=X(" Update Offer "),ue={class:""},ie=l("label",{for:"password"},"Title ",-1),de=l("p",null,null,-1),re={key:0,class:"mt-1 mb-5 text-red-500"},ce={class:""},pe=l("label",{for:"password"},"Price ",-1),fe={key:0,class:"mt-1 mb-5 text-red-500"},me=["src"],ve={key:0,class:"mt-1 mb-5 text-red-500"},_e={class:"text-center bg-teal-100 rounded-3xl m-2"},he={class:"bg-white rounded-3xl w-full m-auto"},ge=["src"],be=["onClick","value"],we=l("svg",{width:"20px",height:"20px",viewBox:"0 0 24 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),l("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),l("g",{id:"SVGRepo_iconCarrier"},[l("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.207 6.207a1 1 0 0 0-1.414-1.414L12 10.586 6.207 4.793a1 1 0 0 0-1.414 1.414L10.586 12l-5.793 5.793a1 1 0 1 0 1.414 1.414L12 13.414l5.793 5.793a1 1 0 0 0 1.414-1.414L13.414 12l5.793-5.793z",fill:"#ffffff"})])],-1),xe=[we],Ve={class:"flex mt-4"},ye={class:"flex items-center"},Se=l("label",{class:"mx-2"}," status ",-1),Le={setup(ke){const L=[ee,te,ae],R=q();o("");const N=K();o("ar");const a=o({number:"",Title:"",status:!0,price:"",images:[]}),x=H(),I=o(0),V=o(""),g=o([]),n=o(""),r=o({}),b=o(null);o(0),o(0);const m=o([]),j=o([{name:"English",value:"English"},{name:"Arabic",value:"Arabic"},{name:"Azerbaijan",value:"Azerbaijan"},{name:"Georgia",value:"Georgia"},{name:"Russia",value:"Russia"},{name:"Turkey",value:"Turkey"}]),c=o("English"),A=t=>{console.log(t.files[0]),m.value=t.files,V.value=t.files;for(let e=0;e<m.value.length;e++)g.value.push(URL.createObjectURL(m.value[e]));console.log(g.value)},F=t=>{v.post(`/api/accommodition/delete_image/${t}`).then(e=>{countries.value=e.data.countries,console.log(countries.value)}),setTimeout(()=>{v.get(`/api/offers/${x.params.id}`).then(e=>{var p;b.value=(p=e.data.offer)==null?void 0:p.media,e.data.offer.status==1&&(a.value.status=!0),e.data.offer.status==0&&(a.value.status=!1),console.log(e.data.offer.number),a.value.price=e.data.offer.price,c.value=e.data.offer.lang,a.value.Title=e.data.offer.title,r.value=e.data.offer})},200)},P=()=>{const t=new FormData;for(let e=0;e<m.value.length;e++)t.append("images[]",m.value[e]);t.append("title",a.value.Title),a.value.status==!0&&(a.value.status=1,t.append("status",a.value.status)),a.value.status==!1&&(a.value.status=0,t.append("status",a.value.status)),t.append("price",a.value.price),t.append("lang",c.value),v.defaults.headers.common.local=c.value,v.post(`/api/offers/${r.value.id}/update`,t).then(e=>{N.add({severity:"success",summary:"Successful",detail:"Offer update",life:3e3}),R.go(-1),console.log("asd"),n.value=[],I.value=1;let p=r.value.media;r.value=e.data.offer,r.value.media=p}).catch(e=>{n.value=e.response.data.errors,console.log(n.value)})};return J(()=>{v.get(`/api/offers/${x.params.id}`).then(t=>{var e;b.value=(e=t.data.offer)==null?void 0:e.media,t.data.offer.status==1&&(a.value.status=!0),t.data.offer.status==0&&(a.value.status=!1),console.log(t.data.offer.number),a.value.price=t.data.offer.price,c.value=t.data.offer.lang,a.value.Title=t.data.offer.title,r.value=t.data.offer})}),(t,e)=>{const p=u("Dropdown"),E=u("InputText"),G=u("InputNumber"),O=u("FileUpload"),$=u("InputSwitch"),z=u("Button"),D=u("Toast"),M=u("va-card");return i(),T(M,{class:"card"},{default:_(()=>{var y,S,k;return[l("div",le,[l("form",{onSubmit:Q(P,["prevent"]),class:"flex flex-col w-3/4 py-9"},[l("h2",oe,[ne,d(p,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),editable:"",options:j.value,optionLabel:"name","option-value":"value",class:"w-36 mx-3 mx-10"},null,8,["modelValue","options"])]),l("div",ue,[ie,de,d(E,{modelValue:a.value.Title,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.Title=s),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(y=n.value)!=null&&y.title?(i(),f("div",re,w(n.value.title[0]),1)):h("",!0)]),l("div",ce,[pe,d(G,{modelValue:a.value.price,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.price=s),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(S=n.value)!=null&&S.price?(i(),f("div",fe,w(n.value.price[0]),1)):h("",!0)]),l("div",null,[d(O,{id:"password",onUploader:A,accept:"image/*",required:"true",multiple:!1,"custom-upload":!0,autofocus:"",class:W({"p-invalid":t.submitted})},{empty:_(()=>[V.value!=""?(i(!0),f(U,{key:0},C(g.value,s=>(i(),f("img",{src:s,class:"w-[200px] h-[90px] mb-3"},null,8,me))),256)):h("",!0)]),_:1},8,["class"]),(k=n.value)!=null&&k.images?(i(),f("div",ve,w(n.value.images[0]),1)):h("",!0),d(B(Z),{onSlideChange:t.onSlideChange,navigation:!0,options:t.swiperOptions,modules:L,scrollbar:{draggable:!0},autoplay:{delay:2e3,disableOnInteraction:!1},breakpoints:{320:{slidesPerView:2,spaceBetween:10},480:{slidesPerView:3,spaceBetween:20},768:{slidesPerView:4,spaceBetween:10}}},{default:_(()=>[(i(!0),f(U,null,C(b.value,s=>(i(),T(B(Y),null,{default:_(()=>[l("div",_e,[l("div",he,[l("img",{class:"relative rounded-md",style:{height:"150px !important"},src:s==null?void 0:s.original_url},null,8,ge),l("button",{class:"absolute top-[7%] left-[5%] bg-[#861d1d] p-2 px-4 rounded-full",onClick:Te=>F(s.id),value:s.id},xe,8,be)])])]),_:2},1024))),256))]),_:1},8,["onSlideChange","options"])]),l("div",Ve,[l("div",ye,[Se,d($,{modelValue:a.value.status,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.status=s)},null,8,["modelValue"])])]),d(z,{type:"submit",label:"Submit",class:"mt-3"})],40,se)]),d(D)]}),_:1})}}};export{Le as default};
